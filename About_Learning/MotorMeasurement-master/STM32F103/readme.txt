工程是基于stm32f107所设计的电机测量 

*******************************************************

v0.7.5

硬件如下：
1：TIM2_CH2和TIM3_CH2是捕捉口，其中TIM3_CH2采用重映射（第一个设计者蛋疼的设计）
2：TIM4是发送定时器
3：TIM5是采样定时器
4：USART2和上位机通信，采用115200 8N1方式，采用端口重映射（第一个设计者蛋疼的设计）
5：DAC1和DAC2用于电机转速调节

软件如下：
1：采用中断响应的结构，大大提高单片机的处理能力，和实时响应性能
2：取消没有必要的DMA通道，减少功耗和处理响应时间
3：采用一种低频算周期的方法计算，统一分频，避免变频操作

协议如下：
1：发送报文P和Q分别代表转速和转矩，后4字节是16进制的数据，eg: P0123Q4567 转速:291 转矩:17767
2：接收报文M和N分别代表DAC1和DAC1，后4字节是16进制的数据，eg: M0123N0456 Vdac1:0.291 Vdac2:1.110

*******************************************************

v0.7.8

硬件变动：
1：取消TIM5，使得XL的也能适应该项目

软件变动：
1：取消高频测频率的方法，5ms*200的话分辨率在200，会达到2%的误差，弃用。
2：正加16维的数组进行均值滤波，达到平滑效果。

协议变动：
1：弃用上个接收报文方案，直接用单字节，DAC1范围0x00~0x14 DAC2 0x20~0x34 ，分别对应不同档位。

*******************************************************

v0.8.3

硬件变动：
1：添加TIM5作为高频测量方法的定时器50ms，用于测量扭矩，

软件变动：
1：转速采用60个方波为一个周期进行计算，在宏定义那里可以修改方波数，平均之后更新数据。
2：TIM3RE采用了高频测量方法，数据稳定。
3：添加了滑动滤波器，可以选择是否使用。

存在问题：
1：错误数据也存入了发送数组，应该采用防脉冲滤波器进行数据剔除。
2：经过测试，结合QT上位机的显示情况，转速不应该添加16滑动平均滤波器和采用10个方波周期，显示稳定。

*******************************************************

v0.8.5

硬件变动：无

软件变动：
1：扭矩采用20个滑动滤波，减少突变情况，去除步进为20的误差。
2：删除一些弃用的代码。
3：添加机器初始化代码。

协议声明：
1：上位机串口发送0x00-0x14为DAC1的输入数据，电压变动范围0.0v-3.3v，0x00为关闭DAC1
2：上位机串口发送0x20-0x34为DAC2的输入数据，电压变动范围0.0v-3.3v，0x20为关闭DAC2
3：相关程序存放在DAC文件夹里面

*******************************************************

v0.9.0 （――――样机初版――――）

硬件变动:
1：主板为第四版机电
2：signal1为扭矩，signal2为转速。

软件变动：
1：串口为115200，8位无校验位，与QT程序（v530）一致。
2：TIM2转速（低频），TIM3扭矩（高频）。

*******************************************************

v0.9.2 （――――样机初版――――）

硬件变动:
无

软件变动：
1：串口（USART2）用DMA方式发送，采用DMA1的通道7（硬件上规定的）。串口接收保持使用中断形式。
2：删除了发送报文打包函数和中断发送的代码。
3：删除了LCD显示驱动、ADC采样驱动、PWM驱动，但源文件还保留。
4：将滤波预处理函数从usart2.c移动到timer.c里面。
5：使用定时器对DMA发送速度进行控制。
6：删除一些不用的代码。
7：添加killkill.bat批处理脚本，用于删除编译后的文件，减少体积。

*******************************************************

